<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <!--
    <meta http-equiv="refresh" content="15; url=hat.html"/>
    -->
    <title>Hat game client</title>
    <link rel="stylesheet" type="text/css" href="hat.css"/>
    <script src="jquery-1.10.2.js"></script>
    <script src="hat-elements.js"></script>
    <script src="hat-requests.js"></script>
    <script src="hat.js"></script>
</head>
<body>
     <nav style="display:none">
        <a href="javascript: set_ui_layout(const_ui_state_pre_room);">const_ui_state_pre_room</a> |
        <a href="javascript: set_ui_layout(const_ui_state_in_room);">const_ui_state_in_room</a> |
        <a href="javascript: set_ui_layout(const_ui_state_word_gen);">const_ui_state_word_gen</a> |
        <a href="javascript: set_ui_layout(const_ui_state_turn_other);">const_ui_state_turn_other</a> |
        <a href="javascript: set_ui_layout(const_ui_state_turn_me);">const_ui_state_turn_me</a> |
        <a href="javascript: set_ui_layout(const_ui_state_endgame);">const_ui_state_endgame</a>
    </nav>
    <div id="page">
    <button id="infobox" onclick='$("#infobox").hide()'></button>
    <div id="room_create_enter" class="pre-room">
        <span class="tab_title">Create\Enter Room</span>
        <div class="input-control modern text">
            <input type="text" id="room_name"/>
            <span class="label">Room name</span>
        </div>
        <div class="input-control modern text">
            <input type="text" id="room_pass"/>
            <span class="label">Room password</span>
        </div>
        <br>
        <div class="input-control modern text">
            <input type="text" id="player_name"/>
            <span class="label">Your name</span>
        </div>
        <br>
        <div class="input-control modern text">
            <input type="text" id="hatgame_word_per_player" value="25"/>
            <span class="label">Words per player</span>
        </div>
        <div class="input-control modern text">
            <input type="text" id="hatgame_seconds_per_turn"value="25"/>
            <span class="label">Second per turn</span>
        </div>
        <br>
        <button id="btn-room-create" class="button primary" onclick="room_create($('#room_name').val(), $('#room_pass').val(), $('#player_name').val(), $('#hatgame_word_per_player').val(), $('#hatgame_seconds_per_turn').val())">Create room</button>
        <button id="btn-room-enter" class="button primary" onclick="room_try_enter($('#room_name').val(), $('#room_pass').val(), $('#player_name').val())">Enter room</button>
    </div>
    <div id="room_find" class="pre-room">
        <span class="tab_title">Find Room</span>
        <div class="input-control select">
            <select id="room_select" size="5">
                <option value="blank">No rooms found</option>
            </select>
        </div>
        <br>
        <button id="btn-reload-rooms" class="button primary" onclick="room_find()">Reload rooms</button>
    </div>
    <script>
    $( "#room_select" )
      .change(function () {
        var str = "";
        $( "#room_select option:selected" ).each(function() {
          str = $( this ).text();
        });
        $( "#room_name" ).val( str );
      })
      .change();
    </script>
    <div id="room_info">
        <span class="tab_title">Current room: <span id="ui_room_name" class="room_name">N/A</span></span>
        <div id="players_list"></div>
        <!--
        <button class="button" onclick="room_reload_players($('#players_list'))">Reload room players</button>
        -->
    </div>
    <div id="room_inroom">
        <span class="tab_title">Game start</span>
        <button class="button" onclick="hatgame_start_new_game()">Start new game</button>
    </div>
    <div id="game_word_enter">
        <span class="tab_title">Word Generation</span>
        <textarea id='word_enter' rows="14" cols="50" placeholder="Enter words here"></textarea>
        <br>
        <button class="button" onclick="hatgame_submit_words($('#word_enter'))">Submit words</button>
    </div>
    <div id="game_turn">
        <div id="hatgame_turn_other">
            <span class="tab_title">Game - Others turn</span>
            <div class="playersSchema">
                <span class="ui_player_tile">Test Player 1</span>
            </div>
        </div>
        <div id="hatgame_turn_me">
            <span class="tab_title">Game - My turn</span>
            <span id="turn_timer" class="ui_player_name">time</span>
            <div id="hatgame_turn_me_pre">
                <button class="button" onclick="hatgame_start_turn()">Start turn</button>
            </div>
            <div id="hatgame_turn_me_active">
                <span class="tab_title">Current word: </span><span id="word" class="word_tile"></span>
                <br>
                <button class="button" onclick="hatgame_next_word()">Word done</button>
            </div>
            <br>
            <span class="tab_title">Done words: </span><span id="done_words_holder"></span>
        </div>
    </div>
    <div id="game_aftermath">
        <span class="tab_title">The game has ended.</span>
        <button class="button" onclick="reset()">Find new round</button>
    </div>
    <div id="log_container">
        <div id="log" style="display:none">
            <div>Log:</div>
        </div>
    </div>
    <script>        
        $(window).on('keydown', function(e) {
            if (e.which == 120) {
                $("#log").toggle();
            }
            if (e.which == 119) {
                $("nav").toggle();
            }
            if (e.which == 119) {
                $("#backend-holder").toggle();
            }
        });
    </script>
    <div id="backend-holder" class="leftfloat" style="display:none">
        <input type="text" id="backend" value=""/>
        <button onclick="set_backend($('#backend').val())">save</button>
    </div>    
    </div>
</body>
</html>